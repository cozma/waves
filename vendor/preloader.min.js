!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.Preloader=t()}(this,function(){"use strict";function e(e,t){var n=new XMLHttpRequest;n.onload=function(){return t(n.response)},n.onprogress=r.thunk,n.open("GET",e),n.send()}function t(){r.bar||(r.bar=document.querySelector("progress"))}function n(){if(document.body)if(window.DEBUG){if(l.length>0){var e=l.shift(),t=document.createElement("script");t.src=e,t.onload=n,document.body.appendChild(t)}}else{var o=document.createElement("script");o.innerHTML=l.join("\n"),document.body.appendChild(o)}else setTimeout(n,0)}function o(t,o,r){e(t,function(e){window.DEBUG?l[o]=t:l[o]=e,++d===r.length&&n()})}var r={bar:null,files:{},loaded:0,total:0,shrink:function(e){t(),r.bar&&(r.bar.style.height=e)},hide:function(){t(),r.bar&&(r.bar.style.display="none")},thunk:function(e){var n=e.target.responseURL||e.target.currentSrc;if(n){r.files[n]||(r.files[n]={});var o=r.files[n];if("number"==typeof e.loaded)o.loaded=e.loaded,o.total=e.total;else if(e.srcElement){for(var a=e.srcElement.buffered,i=Number.MAX_VALUE,l=Number.MIN_VALUE,d=0;d<a.length;++d)i=Math.min(i,a.start(d)),l=Math.max(l,a.end(d));o.loaded=1e3*l,o.total=1e3*e.srcElement.duration}}var s=0,f=0;for(var u in r.files){var c=r.files[u];f+=c.loaded,s+=c.total}r.loaded=f,r.total=s,t(),r.bar&&s&&(r.bar.max=s,r.bar.value=f)}},a=document.querySelectorAll("script"),i=a[a.length-1],l=[],d=0;return i&&i.dataset.files&&i.dataset.files.split(",").forEach(o),r});